"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[187],{4187:function(t,e,i){i.r(e),i.d(e,{default:function(){return m}});var l=i(5893),o=i(7294),n=i(5152),r=i.n(n);function s(t){let{show:e,onClose:i,onCreate:n,projects:r,onOpen:s,onExport:a,onExportAll:d,onImport:c,onDelete:h}=t,g=(0,o.useRef)(null);return e?(0,l.jsx)("div",{className:"modal d-block",tabIndex:-1,role:"dialog",style:{background:"rgba(0,0,0,0.35)"},children:(0,l.jsx)("div",{className:"modal-dialog modal-md modal-dialog-centered",role:"document",children:(0,l.jsxs)("div",{className:"modal-content",style:{background:"#071821",border:"1px solid rgba(255,255,255,0.08)",color:"#fff"},children:[(0,l.jsxs)("div",{className:"modal-header",style:{borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[(0,l.jsx)("h5",{className:"modal-title text-white",children:"Projects"}),(0,l.jsx)("button",{type:"button",className:"btn-close-custom","aria-label":"Close projects modal",onClick:i,children:"X"})]}),(0,l.jsxs)("div",{className:"modal-body",style:{color:"#fff"},children:[(0,l.jsx)("p",{className:"text-muted",children:"Choose an option"}),(0,l.jsxs)("div",{className:"d-grid gap-2",children:[(0,l.jsx)("button",{className:"btn btn-outline-light",onClick:()=>alert("Open previous projects (stub)"),children:"See previous projects"}),(0,l.jsx)("button",{className:"btn btn-accent",onClick:n,children:"Create new project"}),(0,l.jsx)("button",{className:"btn btn-outline-light",onClick:()=>{var t;return null===(t=g.current)||void 0===t?void 0:t.click()},children:"Import Project"}),(0,l.jsx)("input",{ref:g,type:"file",accept:".json",style:{display:"none"},onChange:t=>{var e;(null===(e=t.target.files)||void 0===e?void 0:e[0])&&c&&c(t.target.files[0]),t.target.value=""}})]}),(0,l.jsx)("hr",{style:{borderColor:"rgba(255,255,255,0.04)"}}),(0,l.jsx)("h6",{children:"Recent"}),0===r.length?(0,l.jsx)("div",{className:"text-muted",children:"No recent projects"}):(0,l.jsx)("ul",{className:"list-group list-group-flush mt-2",children:r.map(t=>(0,l.jsxs)("li",{className:"list-group-item bg-transparent d-flex justify-content-between align-items-center",style:{color:"#fff",borderColor:"rgba(255,255,255,0.08)"},children:[(0,l.jsx)("span",{children:t.name}),(0,l.jsxs)("div",{className:"d-flex gap-2",children:[s&&(0,l.jsx)("button",{className:"btn btn-outline-light btn-sm",onClick:()=>s(t.id),children:"Open"}),a&&(0,l.jsx)("button",{className:"btn btn-outline-light btn-sm",onClick:()=>a(t.id),children:"Export"}),h&&(0,l.jsx)("button",{className:"btn btn-outline-light btn-sm",onClick:()=>h(t.id),children:"Delete"})]})]},t.id))})]}),(0,l.jsxs)("div",{className:"modal-footer",children:[d&&r.length>0&&(0,l.jsx)("button",{className:"btn btn-outline-light",onClick:d,children:"Export All"}),(0,l.jsx)("button",{className:"btn btn-secondary",onClick:i,children:"Close"})]})]})})}):null}function a(t){let{show:e,onClose:i,onConfirm:n}=t,[r,s]=(0,o.useState)("20"),[a,d]=(0,o.useState)("20"),[c,h]=(0,o.useState)(0);return e?(0,l.jsx)("div",{className:"modal d-block",tabIndex:-1,role:"dialog",style:{background:"rgba(0,0,0,0.35)"},children:(0,l.jsx)("div",{className:"modal-dialog modal-md modal-dialog-centered",role:"document",children:(0,l.jsxs)("div",{className:"modal-content",style:{background:"#071821",border:"1px solid rgba(255,255,255,0.08)",color:"#fff"},children:[(0,l.jsxs)("div",{className:"modal-header",style:{borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[(0,l.jsx)("h5",{className:"modal-title text-white",children:"New Project • Building Dimensions"}),(0,l.jsx)("button",{type:"button",className:"btn-close btn-close-white",onClick:i})]}),(0,l.jsxs)("div",{className:"modal-body",children:[(0,l.jsxs)("div",{className:"row g-3 mb-3",children:[(0,l.jsxs)("div",{className:"col",children:[(0,l.jsx)("label",{className:"form-label",children:"Width (m)"}),(0,l.jsx)("input",{type:"number",min:1,className:"form-control form-control-dark",value:r,onChange:t=>s(t.target.value)})]}),(0,l.jsxs)("div",{className:"col",children:[(0,l.jsx)("label",{className:"form-label",children:"Depth (m)"}),(0,l.jsx)("input",{type:"number",min:1,className:"form-control form-control-dark",value:a,onChange:t=>d(t.target.value)})]})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{className:"form-label",children:"Number of Floors"}),(0,l.jsxs)("select",{className:"form-select form-control-dark",value:c,onChange:t=>h(Number(t.target.value)),children:[(0,l.jsx)("option",{value:0,children:"Ground Floor Only"}),(0,l.jsx)("option",{value:1,children:"Ground + 1st Floor"}),(0,l.jsx)("option",{value:2,children:"Ground + 1st + 2nd Floor"}),(0,l.jsx)("option",{value:3,children:"Ground + 1st + 2nd + 3rd Floor"}),(0,l.jsx)("option",{value:4,children:"Ground + 4 Floors"}),(0,l.jsx)("option",{value:5,children:"Ground + 5 Floors"})]})]}),(0,l.jsx)("small",{className:"note",children:"Floor area: Width \xd7 Depth • Each floor: 3m height"})]}),(0,l.jsxs)("div",{className:"modal-footer",children:[(0,l.jsx)("button",{className:"btn btn-secondary",onClick:i,children:"Cancel"}),(0,l.jsx)("button",{className:"btn btn-accent",onClick:()=>n({width:Number(r)||20,depth:Number(a)||20,floors:c,floorHeight:3,unit:"m"}),children:"Create"})]})]})})}):null}let d={walls:[{key:"wall-concrete",label:"Concrete Wall",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="48" height="48" fill="%23888" rx="2"/%3E%3Cpath d="M0 10h48M0 20h48M0 30h48M0 40h48" stroke="%23666" stroke-width="1"/%3E%3C/svg%3E'},{key:"wall-wood",label:"Wood Wall",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="48" height="48" fill="%23a0522d" rx="2"/%3E%3Cpath d="M5 0v48M15 0v48M25 0v48M35 0v48M45 0v48" stroke="%238B4513" stroke-width="2"/%3E%3C/svg%3E'},{key:"wall-steel",label:"Steel Wall",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Cdefs%3E%3ClinearGradient id="steel" x1="0" y1="0" x2="1" y2="1"%3E%3Cstop offset="0%25" stop-color="%23b0c4de"/%3E%3Cstop offset="100%25" stop-color="%23708090"/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width="48" height="48" fill="url(%23steel)" rx="2"/%3E%3C/svg%3E'},{key:"wall-brick",label:"Brick Wall",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="48" height="48" fill="%23a0410d"/%3E%3Cg stroke="%23222" stroke-width="1"%3E%3Crect x="1" y="1" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="14" y="1" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="27" y="1" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="40" y="1" width="7" height="8" fill="%23cd5c5c"/%3E%3Crect x="7" y="10" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="20" y="10" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="33" y="10" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="1" y="19" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="14" y="19" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="27" y="19" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="40" y="19" width="7" height="8" fill="%23cd5c5c"/%3E%3Crect x="7" y="28" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="20" y="28" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="33" y="28" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="1" y="37" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="14" y="37" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="27" y="37" width="12" height="8" fill="%23cd5c5c"/%3E%3Crect x="40" y="37" width="7" height="8" fill="%23cd5c5c"/%3E%3C/g%3E%3C/svg%3E'},{key:"wall-glass",label:"Glass Wall",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Cdefs%3E%3ClinearGradient id="glass" x1="0" y1="0" x2="1" y2="1"%3E%3Cstop offset="0%25" stop-color="%23e0f7ff" stop-opacity="0.8"/%3E%3Cstop offset="100%25" stop-color="%2387ceeb" stop-opacity="0.6"/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width="48" height="48" fill="url(%23glass)" rx="2"/%3E%3Cpath d="M8 8l32 32M40 8L8 40" stroke="%23fff" stroke-width="1" opacity="0.5"/%3E%3C/svg%3E'},{key:"wall-drywall",label:"Drywall",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="48" height="48" fill="%23f5f5dc" rx="2"/%3E%3Cpath d="M0 0h48v48H0z" fill="%23e8e8d0" opacity="0.3"/%3E%3C/svg%3E'},{key:"wall-stone",label:"Stone Wall",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="48" height="48" fill="%23696969"/%3E%3Cg fill="%23808080" stroke="%23444" stroke-width="1"%3E%3Cellipse cx="10" cy="8" rx="8" ry="6"/%3E%3Cellipse cx="28" cy="10" rx="10" ry="7"/%3E%3Cellipse cx="38" cy="20" rx="7" ry="8"/%3E%3Cellipse cx="15" cy="25" rx="9" ry="7"/%3E%3Cellipse cx="32" cy="32" rx="8" ry="6"/%3E%3Cellipse cx="8" cy="38" rx="6" ry="7"/%3E%3Cellipse cx="25" cy="42" rx="7" ry="5"/%3E%3C/g%3E%3C/svg%3E'}],windows:[{key:"window-casement",label:"Casement",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="48" height="48" fill="%238B4513" rx="2"/%3E%3Crect x="4" y="4" width="40" height="40" fill="%2387ceeb" opacity="0.6"/%3E%3Cpath d="M4 24h40M24 4v40" stroke="%238B4513" stroke-width="3"/%3E%3Ccircle cx="30" cy="24" r="2" fill="%23444"/%3E%3C/svg%3E'},{key:"window-sliding",label:"Sliding",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="48" height="48" fill="%23696969" rx="2"/%3E%3Crect x="3" y="3" width="20" height="42" fill="%2387ceeb" opacity="0.6"/%3E%3Crect x="25" y="3" width="20" height="42" fill="%2387ceeb" opacity="0.6"/%3E%3Cpath d="M24 0v48" stroke="%23555" stroke-width="2"/%3E%3Cpath d="M3 24h20M25 24h20" stroke="%23696969" stroke-width="1"/%3E%3C/svg%3E'},{key:"window-fixed",label:"Fixed",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="48" height="48" fill="%23555" rx="2"/%3E%3Crect x="6" y="6" width="36" height="36" fill="%2387ceeb" opacity="0.7"/%3E%3Cpath d="M6 24h36M24 6v36" stroke="%23555" stroke-width="2"/%3E%3C/svg%3E'}],doors:[{key:"door-wood",label:"Wood Door",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="48" height="48" fill="%238B4513" rx="2"/%3E%3Cpath d="M5 0v48M10 0v48M15 0v48M20 0v48M25 0v48M30 0v48M35 0v48M40 0v48" stroke="%23654321" stroke-width="1"/%3E%3Crect x="8" y="10" width="32" height="14" fill="%23a0522d" stroke="%23654321" stroke-width="2"/%3E%3Crect x="8" y="28" width="32" height="14" fill="%23a0522d" stroke="%23654321" stroke-width="2"/%3E%3Ccircle cx="34" cy="24" r="2" fill="%23FFD700"/%3E%3C/svg%3E'},{key:"door-steel",label:"Steel Door",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Cdefs%3E%3ClinearGradient id="steeldoor" x1="0" y1="0" x2="1" y2="0"%3E%3Cstop offset="0%25" stop-color="%23708090"/%3E%3Cstop offset="50%25" stop-color="%23b0c4de"/%3E%3Cstop offset="100%25" stop-color="%23708090"/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width="48" height="48" fill="url(%23steeldoor)" rx="2"/%3E%3Cpath d="M0 10h48M0 20h48M0 30h48M0 38h48" stroke="%23556" stroke-width="2"/%3E%3Ccircle cx="38" cy="24" r="2.5" fill="%23333"/%3E%3C/svg%3E'},{key:"door-glass",label:"Glass Door",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="48" height="48" fill="%23444" rx="2"/%3E%3Crect x="4" y="4" width="40" height="40" fill="%2387ceeb" opacity="0.5"/%3E%3Cpath d="M4 16h40M4 32h40M16 4v40M32 4v40" stroke="%23555" stroke-width="2"/%3E%3Ccircle cx="38" cy="24" r="2" fill="%23888"/%3E%3C/svg%3E'}],furniture:[{key:"furn-sofa",label:"Sofa",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Crect x="4" y="18" width="40" height="20" fill="%235d4e37" rx="3"/%3E%3Crect x="4" y="12" width="6" height="26" fill="%235d4e37" rx="2"/%3E%3Crect x="38" y="12" width="6" height="26" fill="%235d4e37" rx="2"/%3E%3Crect x="8" y="14" width="32" height="12" fill="%238B7355" rx="2"/%3E%3Crect x="6" y="38" width="4" height="6" fill="%23333" rx="1"/%3E%3Crect x="38" y="38" width="4" height="6" fill="%23333" rx="1"/%3E%3C/svg%3E'},{key:"furn-table",label:"Table",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Crect x="8" y="16" width="32" height="4" fill="%238B4513" rx="1"/%3E%3Crect x="10" y="20" width="2" height="24" fill="%23654321"/%3E%3Crect x="36" y="20" width="2" height="24" fill="%23654321"/%3E%3Crect x="10" y="44" width="2" height="2" fill="%23333"/%3E%3Crect x="36" y="44" width="2" height="2" fill="%23333"/%3E%3C/svg%3E'},{key:"furn-bed",label:"Bed",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Crect x="4" y="20" width="40" height="16" fill="%23cd853f" rx="2"/%3E%3Crect x="4" y="12" width="40" height="8" fill="%23daa520" rx="2"/%3E%3Crect x="6" y="36" width="3" height="8" fill="%23654321"/%3E%3Crect x="39" y="36" width="3" height="8" fill="%23654321"/%3E%3Ccircle cx="12" cy="16" r="4" fill="%23f0e68c"/%3E%3Ccircle cx="36" cy="16" r="4" fill="%23f0e68c"/%3E%3C/svg%3E'}],roof:[{key:"roof-shingle",label:"Shingle Roof",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Cpath d="M24 4L4 20h40L24 4z" fill="%23654321"/%3E%3Cg stroke="%23543210" stroke-width="1"%3E%3Cpath d="M8 20h8l-2 4h-8zM16 20h8l-2 4h-8zM24 20h8l-2 4h-8zM32 20h8l-2 4h-8z"/%3E%3Cpath d="M10 24h8l-2 4h-8zM18 24h8l-2 4h-8zM26 24h8l-2 4h-8z"/%3E%3Cpath d="M12 28h8l-2 4h-8zM20 28h8l-2 4h-8zM28 28h8l-2 4h-8z"/%3E%3C/g%3E%3C/svg%3E'},{key:"roof-metal",label:"Metal Roof",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Cdefs%3E%3ClinearGradient id="metal" x1="0" y1="0" x2="0" y2="1"%3E%3Cstop offset="0%25" stop-color="%23c0c0c0"/%3E%3Cstop offset="100%25" stop-color="%23888"/%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath d="M24 4L4 20h40L24 4z" fill="url(%23metal)"/%3E%3Cpath d="M12 12v16M20 8v20M28 8v20M36 12v16" stroke="%23666" stroke-width="2"/%3E%3C/svg%3E'},{key:"roof-tile",label:"Tile Roof",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Cpath d="M24 4L4 20h40L24 4z" fill="%23a0410d"/%3E%3Cg fill="%23cd5c5c"%3E%3Crect x="6" y="20" width="8" height="4" rx="1"/%3E%3Crect x="14" y="20" width="8" height="4" rx="1"/%3E%3Crect x="22" y="20" width="8" height="4" rx="1"/%3E%3Crect x="30" y="20" width="8" height="4" rx="1"/%3E%3Crect x="10" y="24" width="8" height="4" rx="1"/%3E%3Crect x="18" y="24" width="8" height="4" rx="1"/%3E%3Crect x="26" y="24" width="8" height="4" rx="1"/%3E%3Crect x="14" y="28" width="8" height="4" rx="1"/%3E%3Crect x="22" y="28" width="8" height="4" rx="1"/%3E%3C/g%3E%3C/svg%3E'},{key:"roof-flat",label:"Flat Roof",icon:'data:image/svg+xml,%3Csvg width="48" height="48" xmlns="http://www.w3.org/2000/svg"%3E%3Crect x="4" y="18" width="40" height="12" fill="%23696969" rx="1"/%3E%3Cpath d="M4 24h40" stroke="%23555" stroke-width="1"/%3E%3Crect x="8" y="30" width="2" height="14" fill="%23888"/%3E%3Crect x="38" y="30" width="2" height="14" fill="%23888"/%3E%3C/svg%3E'}]};function c(t){let{activeTool:e,selectedKey:i,onChoose:o}=t;if("none"===e)return null;let n=d[e];return(0,l.jsxs)("div",{style:{position:"fixed",left:0,right:0,bottom:0,background:"linear-gradient(90deg, rgba(79,209,197,0.12), rgba(91,168,255,0.12))",borderTop:"1px solid rgba(255,255,255,0.15)",backdropFilter:"blur(8px)",padding:"10px 16px",display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",zIndex:1040},children:[(0,l.jsx)("strong",{style:{marginRight:8,textTransform:"capitalize",color:"white",fontSize:"16px"},children:e}),n.map(t=>{let e=i===t.key;return(0,l.jsxs)("button",{className:"btn ".concat(e?"btn-accent":"btn-outline-light"),onClick:()=>o(t.key),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",padding:"10px 12px",minWidth:"100px"},children:[(0,l.jsx)("img",{src:t.icon,alt:t.label,style:{width:"48px",height:"48px",borderRadius:"4px"}}),(0,l.jsx)("span",{style:{fontSize:"11px",textAlign:"center",lineHeight:"1.2"},children:t.label})]},t.key)})]})}function h(t){let{contextMenu:e,onMove:i,onRotate:o,onResize:n,onClose:r}=t;return e?(0,l.jsxs)("div",{style:{position:"fixed",left:"".concat(e.x,"px"),top:"".concat(e.y,"px"),backgroundColor:"#1a2d42",border:"1px solid #4fd1c5",borderRadius:"4px",padding:"8px 0",zIndex:1e3,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",minWidth:"120px"},onClick:t=>t.stopPropagation(),children:[(0,l.jsx)("button",{onClick:()=>{i(e.itemId),r()},style:{width:"100%",padding:"8px 12px",backgroundColor:"transparent",border:"none",color:"#c2d3de",cursor:"pointer",textAlign:"left",fontSize:"14px",transition:"background-color 0.2s"},onMouseEnter:t=>{t.target.style.backgroundColor="#2a4d62"},onMouseLeave:t=>{t.target.style.backgroundColor="transparent"},children:"Move"}),(0,l.jsx)("button",{onClick:()=>{o(e.itemId),r()},style:{width:"100%",padding:"8px 12px",backgroundColor:"transparent",border:"none",color:"#c2d3de",cursor:"pointer",textAlign:"left",fontSize:"14px",transition:"background-color 0.2s"},onMouseEnter:t=>{t.target.style.backgroundColor="#2a4d62"},onMouseLeave:t=>{t.target.style.backgroundColor="transparent"},children:"Rotate"}),(0,l.jsx)("button",{onClick:()=>{n(e.itemId),r()},style:{width:"100%",padding:"8px 12px",backgroundColor:"transparent",border:"none",color:"#c2d3de",cursor:"pointer",textAlign:"left",fontSize:"14px",transition:"background-color 0.2s"},onMouseEnter:t=>{t.target.style.backgroundColor="#2a4d62"},onMouseLeave:t=>{t.target.style.backgroundColor="transparent"},children:"Resize"}),(0,l.jsx)("button",{onClick:r,style:{width:"100%",padding:"8px 12px",backgroundColor:"transparent",border:"none",color:"#c2d3de",cursor:"pointer",textAlign:"left",fontSize:"14px",transition:"background-color 0.2s"},onMouseEnter:t=>{t.target.style.backgroundColor="#2a4d62"},onMouseLeave:t=>{t.target.style.backgroundColor="transparent"},children:"Cancel"})]}):null}function g(t){let{resizeMenu:e,onResizeWidth:i,onResizeLength:o,onClose:n}=t;return e?(0,l.jsxs)("div",{style:{position:"fixed",left:"".concat(e.x,"px"),top:"".concat(e.y,"px"),backgroundColor:"#1a2d42",border:"1px solid #4fd1c5",borderRadius:"4px",padding:"8px 0",zIndex:1e3,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",minWidth:"140px"},onClick:t=>t.stopPropagation(),children:[(0,l.jsx)("button",{onClick:()=>{i(e.itemId),n()},style:{width:"100%",padding:"8px 12px",backgroundColor:"transparent",border:"none",color:"#c2d3de",cursor:"pointer",textAlign:"left",fontSize:"14px",transition:"background-color 0.2s"},onMouseEnter:t=>{t.target.style.backgroundColor="#2a4d62"},onMouseLeave:t=>{t.target.style.backgroundColor="transparent"},children:"Resize Width"}),(0,l.jsx)("button",{onClick:()=>{o(e.itemId),n()},style:{width:"100%",padding:"8px 12px",backgroundColor:"transparent",border:"none",color:"#c2d3de",cursor:"pointer",textAlign:"left",fontSize:"14px",transition:"background-color 0.2s"},onMouseEnter:t=>{t.target.style.backgroundColor="#2a4d62"},onMouseLeave:t=>{t.target.style.backgroundColor="transparent"},children:"Resize Length"}),(0,l.jsx)("button",{onClick:n,style:{width:"100%",padding:"8px 12px",backgroundColor:"transparent",border:"none",color:"#c2d3de",cursor:"pointer",textAlign:"left",fontSize:"14px",transition:"background-color 0.2s"},onMouseEnter:t=>{t.target.style.backgroundColor="#2a4d62"},onMouseLeave:t=>{t.target.style.backgroundColor="transparent"},children:"Cancel"})]}):null}let x="buildsphere_projects_v1";function p(){try{let t=localStorage.getItem(x);if(!t)return[];return JSON.parse(t)}catch(t){return[]}}function u(t){localStorage.setItem(x,JSON.stringify(t))}let f=r()(()=>Promise.all([i.e(737),i.e(934),i.e(705),i.e(768)]).then(i.bind(i,8406)),{loadableGenerated:{webpack:()=>[8406]},ssr:!1});function m(){let[t,e]=(0,o.useState)(!1),[i,n]=(0,o.useState)(!1),[r,d]=(0,o.useState)([]),[x,m]=(0,o.useState)("none"),[w,C]=(0,o.useState)(null),[b,y]=(0,o.useState)(0),[E,v]=(0,o.useState)(null),[k,j]=(0,o.useState)([]),[M,N]=(0,o.useState)([]),[S,z]=(0,o.useState)(""),[R,I]=(0,o.useState)(""),[D,L]=(0,o.useState)(!1),[B,F]=(0,o.useState)(null),[W,G]=(0,o.useState)(!1),[A,P]=(0,o.useState)(!1),[O,_]=(0,o.useState)(null),[U,H]=(0,o.useState)(null),[T,J]=(0,o.useState)(null),K=["walls","windows","doors","furniture","roof"];function X(t){m(x===t?"none":t),C(null),L(!1);let e=K.indexOf(t);e>=0&&y(e)}function Y(t,e){F(t),_(e),P(!0),H(null)}return(0,o.useEffect)(()=>{d(p())},[]),(0,l.jsxs)("div",{className:"app-shell",children:[(0,l.jsxs)("aside",{className:"sidebar",children:[(0,l.jsx)("h5",{children:"BuildSphere"}),(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("strong",{children:"Tools"})}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,l.jsx)("button",{className:"btn btn-sm btn-outline-light",onClick:()=>y(t=>Math.max(0,t-1)),disabled:0===b,style:{padding:"16px 18px",fontSize:"22px",lineHeight:"1",minWidth:"56px",borderRadius:"8px"},children:"↑"}),(0,l.jsx)("button",{className:"btn btn-sm btn-outline-light",onClick:()=>y(t=>Math.min(4,t+1)),disabled:4===b,style:{padding:"16px 18px",fontSize:"22px",lineHeight:"1",minWidth:"56px",borderRadius:"8px"},children:"↓"})]}),(0,l.jsx)("div",{style:{flex:1,overflow:"hidden",position:"relative",height:"420px"},children:(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",transition:"transform 0.3s ease",transform:"translateY(-".concat(84*b,"px)")},children:[(0,l.jsx)("div",{style:{marginBottom:"6px"},children:(0,l.jsxs)("button",{className:"btn btn-outline-light w-100",onClick:()=>X("walls"),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",padding:"16px",borderRadius:"10px"},children:[(0,l.jsx)("img",{src:"data:image/svg+xml,%3Csvg width='44' height='44' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='44' height='44' fill='%234fd1c5' rx='3'/%3E%3Cpath d='M0 8h44M0 16h44M0 24h44M0 32h44' stroke='%23fff' stroke-width='1' opacity='0.55'/%3E%3C/svg%3E",alt:"Walls",style:{width:"44px",height:"44px"}}),(0,l.jsx)("span",{style:{fontSize:"13px"},children:"Walls"})]})}),(0,l.jsx)("div",{style:{marginBottom:"6px"},children:(0,l.jsxs)("button",{className:"btn btn-outline-light w-100",onClick:()=>X("windows"),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",padding:"16px",borderRadius:"10px"},children:[(0,l.jsx)("img",{src:"data:image/svg+xml,%3Csvg width='44' height='44' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='44' height='44' fill='%238B4513' rx='3'/%3E%3Crect x='4' y='4' width='36' height='36' fill='%2387ceeb' opacity='0.6'/%3E%3Cpath d='M4 22h36M22 4v36' stroke='%238B4513' stroke-width='3'/%3E%3C/svg%3E",alt:"Windows",style:{width:"44px",height:"44px"}}),(0,l.jsx)("span",{style:{fontSize:"13px"},children:"Windows"})]})}),(0,l.jsx)("div",{style:{marginBottom:"6px"},children:(0,l.jsxs)("button",{className:"btn btn-outline-light w-100",onClick:()=>X("doors"),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",padding:"16px",borderRadius:"10px"},children:[(0,l.jsx)("img",{src:"data:image/svg+xml,%3Csvg width='44' height='44' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='44' height='44' fill='%238B4513' rx='3'/%3E%3Crect x='6' y='8' width='32' height='12' fill='%23a0522d' stroke='%23654321' stroke-width='2'/%3E%3Crect x='6' y='24' width='32' height='12' fill='%23a0522d' stroke='%23654321' stroke-width='2'/%3E%3Ccircle cx='32' cy='22' r='2.5' fill='%23FFD700'/%3E%3C/svg%3E",alt:"Doors",style:{width:"44px",height:"44px"}}),(0,l.jsx)("span",{style:{fontSize:"13px"},children:"Doors"})]})}),(0,l.jsx)("div",{style:{marginBottom:"6px"},children:(0,l.jsxs)("button",{className:"btn btn-outline-light w-100",onClick:()=>X("furniture"),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",padding:"16px",borderRadius:"10px"},children:[(0,l.jsx)("img",{src:"data:image/svg+xml,%3Csvg width='44' height='44' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='3' y='16' width='38' height='18' fill='%235d4e37' rx='4'/%3E%3Crect x='3' y='10' width='6' height='24' fill='%235d4e37' rx='3'/%3E%3Crect x='35' y='10' width='6' height='24' fill='%235d4e37' rx='3'/%3E%3Crect x='8' y='12' width='28' height='11' fill='%238B7355' rx='3'/%3E%3C/svg%3E",alt:"Furniture",style:{width:"44px",height:"44px"}}),(0,l.jsx)("span",{style:{fontSize:"13px"},children:"Furniture"})]})}),(0,l.jsx)("div",{style:{marginBottom:"6px"},children:(0,l.jsxs)("button",{className:"btn btn-outline-light w-100",onClick:()=>X("roof"),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",padding:"16px",borderRadius:"10px"},children:[(0,l.jsx)("img",{src:"data:image/svg+xml,%3Csvg width='44' height='44' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M22 3L4 18h36L22 3z' fill='%23654321'/%3E%3Cg fill='%23cd5c5c'%3E%3Crect x='6' y='18' width='7' height='3' rx='1'/%3E%3Crect x='13' y='18' width='7' height='3' rx='1'/%3E%3Crect x='20' y='18' width='7' height='3' rx='1'/%3E%3Crect x='27' y='18' width='7' height='3' rx='1'/%3E%3Crect x='34' y='18' width='7' height='3' rx='1'/%3E%3C/g%3E%3C/svg%3E",alt:"Roof",style:{width:"44px",height:"44px"}}),(0,l.jsx)("span",{style:{fontSize:"13px"},children:"Roof"})]})})]})})]})]}),(0,l.jsx)("div",{style:{position:"absolute",bottom:18,left:18,right:18},children:(0,l.jsx)("small",{style:{color:"white"},children:"Logged in — Single-user mode"})})]}),(0,l.jsxs)("main",{className:"main",children:[(0,l.jsxs)("div",{className:"toolbar",children:[(0,l.jsx)("button",{className:"btn btn-outline-light",onClick:()=>e(!0),children:"Projects"}),(0,l.jsx)("button",{className:"btn btn-outline-light",disabled:0===k.length,onClick:function(){if(!E||0===k.length)return;let t=k[k.length-1];j(k.slice(0,-1)),N(t=>[...t,E]),v(t)},children:"Undo"}),(0,l.jsx)("button",{className:"btn btn-outline-light",disabled:0===M.length,onClick:function(){if(0===M.length||!E)return;let t=M[M.length-1];N(M.slice(0,-1)),j(t=>[...t,E]),v(t)},children:"Redo"}),(0,l.jsx)("button",{className:"btn btn-accent",onClick:function(){if(!E)return;let t=prompt("Project name:",R||"Untitled")||"Untitled",e=t,i=S||"p_".concat(Date.now());S&&t===R&&(/\(Updated\)\s/.test(R)?(i=S,e=R):(i="p_".concat(Date.now()),e="(Updated) ".concat(t)));let l={id:i,name:e,updatedAt:Date.now(),scene:E};(function(t){let e=p(),i=e.findIndex(e=>e.id===t.id);i>=0?e[i]=t:e.unshift(t),u(e)})(l),d(p()),z(l.id),I(l.name),alert("Project saved")},children:"Save Project"})]}),(0,l.jsxs)("div",{className:"canvas-placeholder",style:{position:"relative",width:"100%",height:"100%"},children:[(0,l.jsx)(f,{scene:E,selectedItemId:B,isMoving:W,isResizing:A,onResizeItem:function(t,e){E&&B&&A&&O&&(isNaN(t)||isNaN(e)||v(i=>{if(!i)return i;let l=i.items.map(i=>{if(i.id!==B)return i;let l={...i.dimensions};if("width"===O){let e=Math.min(Math.max(t,.5),E.bounds.width);l.width=e}else if("depth"===O){let t=Math.min(Math.max(e,.5),E.bounds.depth);l.depth=t}return{...i,dimensions:l}});return{...i,items:l}}))},onFinishResize:function(){P(!1),_(null)},onItemClick:function(t,e,i){F(t),J({itemId:t,x:e,y:i})},onPlaceItem:D?function(t){if(E&&w)try{let{x:e,z:i}=t,l=w.split("-")[0],o=w.split("-").slice(1).join("-"),n={wall:{width:5,height:E.floorHeight||3,depth:.2},window:{width:1.5,height:1.5,depth:.15},door:{width:1,height:2.2,depth:.1},furniture:{width:1.5,height:.8,depth:1},roof:{width:3,height:.2,depth:3}},r=n[l]||n.furniture;if(!r||r.width<=0||r.height<=0||r.depth<=0){console.error("Invalid dimensions:",r);return}let s={id:"it_".concat(Date.now(),"_").concat(Math.random()),kind:l,subtype:o,floor:0,position:{x:e,y:"roof"===l?(E.floorHeight||3)+r.height/2:r.height/2,z:i},dimensions:r,rotation:{x:0,y:0,z:0}};j(t=>[...t,E]),v({...E,items:[...E.items,s]}),N([]),L(!1)}catch(t){console.error("Error placing item:",t)}}:void 0,onMoveItem:function(t,e){!E||!B||!W||isNaN(t)||isNaN(e)||(v(i=>{if(!i)return i;let l=Math.min(Math.max(t,0),i.bounds.width),o=Math.min(Math.max(e,0),i.bounds.depth),n=i.items.map(t=>t.id===B?{...t,position:{x:l,y:t.position.y,z:o}}:t);return console.log("Scene updated, new position for item:",l,o),{...i,items:n}}),N([]))},onFinishMove:function(){G(!1)}}),(0,l.jsx)(h,{contextMenu:T,onMove:function(t){E&&j(t=>[...t,E]),F(t),G(!0),J(null)},onRotate:function(t){if(!E)return;j(t=>[...t,E]);let e=E.items.map(e=>e.id===t?{...e,rotation:{...e.rotation,y:(e.rotation.y+Math.PI/2)%(2*Math.PI)}}:e);v({...E,items:e}),N([]),J(null),F(null)},onResize:function(t){J(null),T&&H({itemId:T.itemId,x:T.x,y:T.y})},onClose:()=>J(null)}),(0,l.jsx)(g,{resizeMenu:U,onResizeWidth:t=>Y(t,"width"),onResizeLength:t=>Y(t,"depth"),onClose:()=>H(null)}),D&&(0,l.jsxs)("div",{style:{position:"absolute",top:10,left:10,background:"rgba(0,0,0,0.7)",color:"#4fd1c5",padding:"10px 15px",borderRadius:"6px",fontSize:"14px",zIndex:100},children:["Click on ground to place ",null==w?void 0:w.split("-").slice(1).join(" ")]})]})]}),(0,l.jsx)(s,{show:t,onClose:()=>e(!1),onCreate:function(){e(!1),n(!0)},projects:r.map(t=>({id:t.id,name:t.name})),onOpen:t=>{let i=r.find(e=>e.id===t);i&&(E&&j(t=>[...t,E]),v(i.scene),z(i.id),I(i.name),N([]),e(!1))},onExport:function(t){let e=r.find(e=>e.id===t);e&&function(t){let e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),i=URL.createObjectURL(e),l=document.createElement("a");l.href=i,l.download="".concat(t.name.replace(/[^a-zA-Z0-9-_]/g,"_"),".json"),l.click(),URL.revokeObjectURL(i)}(e)},onExportAll:function(){!function(){let t=new Blob([JSON.stringify(p(),null,2)],{type:"application/json"}),e=URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download="buildsphere_projects.json",i.click(),URL.revokeObjectURL(e)}()},onImport:function(t){!function(t,e){let i=new FileReader;i.onload=t=>{try{var i;let l=null===(i=t.target)||void 0===i?void 0:i.result,o=JSON.parse(l);if(Array.isArray(o)){let t=p(),i=0;o.forEach(e=>{if(e.id&&e.name&&e.scene){let l=t.findIndex(t=>t.name===e.name);l>=0?t[l]=e:t.unshift(e),i++}}),u(t),e(!0,"Imported ".concat(i," project(s)"))}else if(o.id&&o.name&&o.scene){let t=p(),i=t.findIndex(t=>t.name===o.name);i>=0?(t[i]=o,u(t),e(!0,"Project overwritten")):(t.unshift(o),u(t),e(!0,"Project imported successfully"))}else e(!1,"Invalid project file format")}catch(t){e(!1,"Failed to parse project file")}},i.onerror=()=>e(!1,"Failed to read file"),i.readAsText(t)}(t,(e,i)=>{try{let l=new FileReader;l.onload=t=>{try{var l;let o=JSON.parse(String((null===(l=t.target)||void 0===l?void 0:l.result)||"{}"));if((o&&o.name?p().find(t=>t.name===o.name):void 0)&&!window.confirm("The project you are trying to import already exists. Do you want to replace it?")){alert("Import cancelled");return}alert(i),e&&d(p())}catch(t){alert(i),e&&d(p())}},l.readAsText(t)}catch(t){alert(i),e&&d(p())}})},onDelete:function(t){window.confirm("Do you want to delete this project?")&&(u(p().filter(e=>e.id!==t)),d(p()),S===t&&(v(null),z(""),I("")))}}),(0,l.jsx)(a,{show:i,onClose:()=>n(!1),onConfirm:function(t){let e="p_".concat(Date.now()),i="Project ".concat(r.length+1),l={bounds:{width:t.width,depth:t.depth,unit:t.unit},floors:t.floors,floorHeight:t.floorHeight,items:[]};E&&j(t=>[...t,E]),v(l),z(e),I(i),n(!1),N([])}}),(0,l.jsx)(c,{activeTool:x,selectedKey:w,onChoose:function(t){C(t),L(!0)}})]})}}}]);