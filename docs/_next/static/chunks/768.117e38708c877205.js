"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[768],{8406:function(e,t,i){i.r(t),i.d(t,{default:function(){return f}});var n=i(5893),o=i(7294),s=i(9095),d=i(3486),r=i(4913),a=i(7762),l=i(4250);function h(e){let{item:t,onClick:i,isSelected:s,isMoving:d,isAnyItemMoving:r,screenCoords:a}=e,l=(0,o.useRef)(null),h={wall:"#4fd1c5",window:"#5ba8ff",door:"#b07dff",furniture:"#ffd27d",walls:"#4fd1c5",windows:"#5ba8ff",doors:"#b07dff",roof:"#4fd1c5"}[t.kind]||"#ffffff";return(0,n.jsxs)("mesh",{ref:l,position:[t.position.x,t.position.y,t.position.z],rotation:[t.rotation.x,t.rotation.y,t.rotation.z],frustumCulled:!1,renderOrder:d?2:0,onClick:e=>{r||(e.stopPropagation(),null==i||i(e.clientX,e.clientY))},children:[(0,n.jsx)("boxGeometry",{args:[t.dimensions.width,t.dimensions.height,t.dimensions.depth]}),(0,n.jsx)("meshStandardMaterial",{color:h,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,emissive:d||s?h:"#000000",emissiveIntensity:d||s?.5:0})]})}function c(e){let{scene:t,onPlaceItem:i,isMoving:s,onMoveItem:d,onFinishMove:r,isResizing:a,onResizeItem:h,onFinishResize:c}=e;(0,o.useRef)(new l.iMs),(0,o.useRef)(new l.FM8);let f=(0,o.useRef)(null);return(0,n.jsxs)("mesh",{ref:f,rotation:[-Math.PI/2,0,0],position:[t.bounds.width/2,-.01,t.bounds.depth/2],receiveShadow:!0,onClick:e=>{if(e.point){let t=e.point.x,n=e.point.z;s?(null==d||d(t,n),null==r||r()):a?null==c||c():null==i||i({x:t,z:n})}},onPointerMove:e=>{if(!e.point)return;let t=e.point.x,i=e.point.z;!(isNaN(t)||isNaN(i))&&(s?null==d||d(t,i):a&&(null==h||h(t,i)))},children:[(0,n.jsx)("planeGeometry",{args:[t.bounds.width,t.bounds.depth]}),(0,n.jsx)("meshStandardMaterial",{color:"#0a1822"})]})}function f(e){let{scene:t,onItemClick:i,onPlaceItem:o,selectedItemId:f,isMoving:u,isResizing:p,onMoveItem:m,onResizeItem:b,onFinishMove:g,onFinishResize:w}=e;return t?(0,n.jsxs)(s.Xz,{shadows:!0,style:{width:"100%",height:"100%"},children:[(0,n.jsx)(d.c,{makeDefault:!0,position:[20,20,20],fov:60}),(0,n.jsx)(r.z,{enableDamping:!0,dampingFactor:.05,target:[t.bounds.width/2,0,t.bounds.depth/2]}),(0,n.jsx)("ambientLight",{intensity:.7}),(0,n.jsx)("directionalLight",{position:[10,20,10],intensity:1.5,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),(0,n.jsx)("pointLight",{position:[-10,10,-10],intensity:.8}),(0,n.jsx)("color",{attach:"background",args:["#0a1822"]}),(0,n.jsx)(a.r,{args:[t.bounds.width,t.bounds.depth],cellSize:1,cellThickness:.5,cellColor:"#4fd1c5",sectionSize:5,sectionThickness:1,sectionColor:"#5ba8ff",fadeDistance:50,fadeStrength:1,position:[t.bounds.width/2,-.01,t.bounds.depth/2]}),(0,n.jsx)(c,{scene:t,onPlaceItem:o,isMoving:u,onMoveItem:m,onFinishMove:g,isResizing:p,onResizeItem:b,onFinishResize:w}),Array.from({length:t.floors+1}).map((e,i)=>(0,n.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[t.bounds.width/2,i*t.floorHeight,t.bounds.depth/2],children:[(0,n.jsx)("planeGeometry",{args:[t.bounds.width,t.bounds.depth]}),(0,n.jsx)("meshStandardMaterial",{color:"#4fd1c5",transparent:!0,opacity:0===i?.05:.15,side:l.ehD})]},"floor-".concat(i))),t.items.map(e=>{let t=f===e.id,o=u&&f===e.id;return(0,n.jsx)(h,{item:e,isSelected:t,isMoving:o,isAnyItemMoving:u,onClick:(t,n)=>null==i?void 0:i(e.id,t,n)},e.id)})]}):(0,n.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#c2d3de"},children:"Create a project to begin"})}}}]);